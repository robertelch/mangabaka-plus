{"version":3,"file":"bundle.js","mappings":";;;;;;;;;;;;;AAAA;AAC4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA,qUAAqU,gCAAgC,mBAAmB;AACxX,+BAA+B,GAAG,4KAA4K;AAC9M;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iFAAiF,YAAY,UAAU;AACvG;AACA,2BAA2B,qBAAqB,SAAS;AACzD,0FAA0F,IAAI,IAAI;AAClG,kDAAkD;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gUAAgU,gCAAgC,mBAAmB;AACnX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,MAAM,6DAAM;AACZ;AACA,kBAAkB,6DAAM;;;;;;;;;;;;;;;;AC1LT;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mUAAmU,gCAAgC,mBAAmB;AACtX,gBAAgB,mBAAmB,6DAA6D,sBAAsB,0DAA0D,iBAAiB,IAAI;AACrM;AACA;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA,2BAA2B,uBAAuB;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,UAAU;AAC7D;AACA;AACA;AACA;;;;;;;;;;;;;;;AClCmC;AACnC;AACe,qBAAqB,gDAAU;AAC9C;AACA;AACA;AACA;AACA,yCAAyC,GAAG;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,oCAAoC;AAC3D;AACA;AACA,6BAA6B,oBAAoB;AACjD;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;;;;;;UC/BA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;WCtBA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,IAAI;WACJ;WACA;WACA,IAAI;WACJ;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,CAAC;WACD;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA,sGAAsG;WACtG;WACA;WACA;WACA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA,EAAE;WACF;WACA;;;;;WChEA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;UENA;UACA;UACA;UACA","sources":["webpack://extension/./src/content.js","webpack://extension/./src/site-extensions/base.js","webpack://extension/./src/site-extensions/bato.js","webpack://extension/webpack/bootstrap","webpack://extension/webpack/runtime/async module","webpack://extension/webpack/runtime/define property getters","webpack://extension/webpack/runtime/hasOwnProperty shorthand","webpack://extension/webpack/runtime/make namespace object","webpack://extension/webpack/before-startup","webpack://extension/webpack/startup","webpack://extension/webpack/after-startup"],"sourcesContent":["const jsonURL = chrome.runtime.getURL(\"data.json\");\r\nimport BatoTo from \"./site-extensions/bato\";\r\n\r\nasync function get_insert(id) {\r\n  const query = `\r\n    query ExampleQuery($getComicNodeId: ID!) {\r\n      get_comicNode(id: $getComicNodeId) {\r\n        id\r\n        data {\r\n          score_avg\r\n        }\r\n      }\r\n    }\r\n  `;\r\n\r\n  const variables = { getComicNodeId: id };\r\n\r\n  const res = await fetch('https://bato.to/ap2/', {\r\n    method: 'POST',\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n    },\r\n    body: JSON.stringify({\r\n      query,\r\n      variables,\r\n      operationName: 'ExampleQuery',\r\n    }),\r\n  });\r\n  const result_1 = await res.json();\r\n  const aa = result_1.data?.get_comicNode?.data?.score_avg ?? \"-\";\r\n  return `<a class=\"custom-insert ring-offset-background focus-visible:ring-ring inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-secondary text-secondary-foreground hover:bg-secondary/80 h-9 px-3 py-1\"\r\nhref=\"https://bato.to/series/${id}\" target=\"_blank\" rel=\"noopener noreferrer\" title=\"Open on Batoto\"><img class=\"mr-1 size-5 bg-[#152232]\" alt=\"Bato\" src=\"https://bato.to/amsta/img/batoto/favicon.ico?v0\">${aa.toPrecision(2)}\r\n<!--[!-->\r\n<!--]-->\r\n<!---->\r\n</a>`;\r\n}\r\n\r\nasync function fetchAndUpdate() {\r\n  const res = await fetch(jsonURL);\r\n  const data = await res.json();\r\n  try {\r\n    const elements = document.querySelectorAll('.rounded-lg.border.bg-card.text-card-foreground.shadow-sm.p-0:not(.modified)');\r\n\r\n    for (const element of elements) {\r\n      element.classList.add(\"modified\")\r\n      const mangabakaId = element.getAttribute('data-mangabaka-id');\r\n      const result = data.find(item => item.mangabaka == mangabakaId);\r\n      if (result) {\r\n        const list = element.querySelector('.ratings-list.flex.flex-row.flex-wrap.gap-2.pt-1');\r\n        if (list) {\r\n          const linkHtml = await get_insert(result.batoto);\r\n          list.innerHTML += linkHtml;\r\n        }\r\n      }\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error in fetchAndUpdate:\", error);\r\n  }\r\n}\r\n\r\n\r\nlet testHTML = `\r\n<li data-sidebar=\"menu-sub-item\">\r\n  <a href=\"javascript:void(0);\" class=\"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-none focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground text-sm group-data-[collapsible=icon]:hidden\" data-sidebar=\"menu-sub-button\" data-size=\"md\" data-active=\"false\">\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide-icon lucide lucide-wrench\">\r\n      <path d=\"M14.7 6.3a5 5 0 0 0-6.6 6.6l-6 6a2 2 0 1 0 2.8 2.8l6-6a5 5 0 0 0 6.6-6.6l-3 3-2.8-2.8 3-3z\"></path>\r\n    </svg>\r\n    MangaBaka+ Settings\r\n  </a></li>\r\n`;\r\n\r\nfunction makeSettings() {\r\n  bato = localStorage.getItem(\"bato-toggle\")\r\n  res = bato == \"false\" ? \"\" : \"checked\"\r\n  return `<div class=\"px-2 py-4 sm:px-4\">\r\n    <h1 class=\"py-4 text-xl font-semibold sm:text-2xl\">MangaBaka+ Settings</h1>\r\n    <div class=\"rounded-lg border bg-card text-card-foreground shadow-sm\">\r\n        <div class=\"p-4\">\r\n            <div class=\"prose\">\r\n                <h3 class=\"text-base\">Manga Sources</h3>\r\n                <ul class=\"list-outside list-disc\" style=\"list-style-type: none; padding: 0; margin: 0;\">\r\n                    <li>\r\n<div style=\"display: flex; align-items: center; gap: 8px;\">\r\n  <input type=\"checkbox\" id=\"bato-toggle\" name=\"bato-toggle\" style=\"transform: scale(1.2);\" ${res}>\r\n  <label for=\"bato-toggle\" style=\"font-size: 20px;\">bato.to</label>\r\n</div>\r\n\r\n                    </li>\r\n                </ul>\r\n\r\n            </div>\r\n            <div class=\"text-right\">\r\n<button id=\"save-mbp\" class=\"ring-offset-background focus-visible:ring-ring inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-primary text-primary-foreground hover:bg-primary/90 h-9 px-3 py-1\">\r\n    <!---->Save\r\n    <!---->\r\n</button>\r\n        </div>\r\n        </div>\r\n\r\n    </div>\r\n</div>`\r\n}\r\n\r\n\r\nconst overlay = document.createElement('div');\r\noverlay.id = 'custom-overlay';\r\noverlay.style.position = 'fixed';\r\noverlay.style.top = '0';\r\noverlay.style.left = '0';\r\noverlay.style.width = '100%';\r\noverlay.style.height = '100%';\r\noverlay.style.backgroundColor = 'rgba(0,0,0,0.5)';\r\noverlay.style.zIndex = '9999';\r\noverlay.hidden = true\r\noverlay.textContent = 'This is an injected full-screen div!';\r\ndocument.body.appendChild(overlay);\r\n// Define the function in the same scope\r\nfunction changeOverlay() {\r\n  overlay.hidden = !overlay.hidden\r\n  // your code here\r\n}\r\nfetchAndUpdate();\r\n\r\nfunction checkForSpecials() {\r\n  const currentURL = window.location.href;\r\n  let regex = /https:\\/\\/mangabaka\\.dev\\/mbp/i\r\n  if (regex.test(currentURL)) {\r\n        const cw = document.body.querySelector(\".content-wrapper.svelte-eg0xkf:not(.inject)\")\r\n        cw.innerHTML = makeSettings()\r\n        cw.classList.add(\"inject\")\r\n        save = cw.querySelector(\"#save-mbp\")\r\n        save.addEventListener('click', () => {\r\n          bato = cw.querySelector(\"#bato-toggle\")\r\n          localStorage.setItem(\"bato-toggle\",String(bato.checked))\r\n        });\r\n    settingsObserver = new MutationObserver(() => {\r\n      const url = location.href;\r\n      if (!regex.test(url)) {\r\n        window.location.reload();\r\n      }\r\n    });\r\n    \r\n    settingsObserver.observe(document, {\r\n      subtree: true,\r\n      childList: true,\r\n      attributes: true\r\n    });\r\n  }\r\n\r\n    }\r\n\r\nlet debounceTimer;\r\nconst observer = new MutationObserver(() => {\r\n  clearTimeout(debounceTimer);\r\n  debounceTimer = setTimeout(() => {\r\n\r\n\r\n    \r\nlet g = document.querySelectorAll('.flex.w-full.min-w-0.flex-col.gap-1')[1]\r\nnn = g.querySelector(\".lucide-wrench\")\r\nif(!nn) {\r\n    testHTML = `\r\n<li data-sidebar=\"menu-sub-item\">\r\n  <a id=\"injected_settings\" href=\"https://mangabaka.dev/mbp\" class=\"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-none focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground text-sm group-data-[collapsible=icon]:hidden\" data-sidebar=\"menu-sub-button\" data-size=\"md\" data-active=\"false\">\r\n    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" class=\"lucide-icon lucide lucide-wrench\">\r\n      <path d=\"M14.7 6.3a5 5 0 0 0-6.6 6.6l-6 6a2 2 0 1 0 2.8 2.8l6-6a5 5 0 0 0 6.6-6.6l-3 3-2.8-2.8 3-3z\"></path>\r\n    </svg>\r\n    MangaBaka+ Settings\r\n  </a></li>\r\n`;\r\ng.innerHTML += testHTML\r\n\r\n}\r\n    checkForSpecials();\r\n    fetchAndUpdate();\r\n  }, 100);\r\n});\r\n\r\n\r\nobserver.observe(document.body, {\r\n  childList: true,\r\n  subtree: true,\r\n});\r\nawait BatoTo.init()\r\nconsole.log(\"BATO INITED\")\r\nconsole.log(await BatoTo.getInsert(2060))","export default class BaseModule {\r\n\r\n    static FAVICON_URL = \"https://example.com\"\r\n\r\n    static async getInsert(mb_id) {\r\n        const siteId = this._getSiteId(mb_id);\r\n        const rating = await this._getRating(siteId);\r\n        return this._getInsertPrivate(siteId, rating);\r\n    }\r\n\r\n    static _getInsertPrivate(id,rating) {\r\n        return `\r\n        <a class=\"custom-insert ring-offset-background focus-visible:ring-ring inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&amp;_svg]:pointer-events-none [&amp;_svg]:size-4 [&amp;_svg]:shrink-0 bg-secondary text-secondary-foreground hover:bg-secondary/80 h-9 px-3 py-1\"\r\n        href=\"${this._makeLink(id)}\" target=\"_blank\" rel=\"noopener noreferrer\" title=\"Open on ${this.constructor.name}\"><img class=\"mr-1 size-5 bg-[_152232]\" alt=\"Bato\" src=\"${this.FAVICON_URL}\">${rating}\r\n        </a>`;\r\n    }\r\n\r\n    static _makeLink(id) {\r\n        throw new Error(`${this.constructor.name} must implement makeLink(id)`);\r\n    }\r\n\r\n    static async _getRating(id) {\r\n        throw new Error(`${this.constructor.name} must implement getRating(id)`);\r\n    }\r\n\r\n    static _getSiteId(mb_id) {\r\n        return this.data.find(item => item.mangabaka == mb_id).siteId;\r\n    }\r\n\r\n    static async init() {\r\n        const jsonURL = chrome.runtime.getURL(`./${this.name}.json`); \r\n        const res = await fetch(jsonURL);\r\n        this.data = await res.json();\r\n    }\r\n}","import BaseModule from './base.js';\r\n\r\nexport default class BatoTo extends BaseModule {\r\n\r\n    static FAVICON_URL = \"https://bato.to/amsta/img/batoto/favicon.ico?v0\"\r\n\r\n    static _makeLink(id) {\r\n        return `https://bato.to/series/${id}`\r\n    }\r\n\r\n    static async _getRating(id) {\r\n        const query = `\r\n            query ExampleQuery($getComicNodeId: ID!) {\r\n                get_comicNode(id: $getComicNodeId) {\r\n                    data { score_avg }\r\n                }\r\n            }\r\n        `;\r\n\r\n        const res = await fetch('https://bato.to/ap2/', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n                query,\r\n                variables: { getComicNodeId: id },\r\n                operationName: 'ExampleQuery',\r\n            }),\r\n        });\r\n        const data = await res.json();\r\n        return data.data?.get_comicNode?.data?.score_avg ?? \"-\";\r\n    }\r\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","var webpackQueues = typeof Symbol === \"function\" ? Symbol(\"webpack queues\") : \"__webpack_queues__\";\nvar webpackExports = typeof Symbol === \"function\" ? Symbol(\"webpack exports\") : \"__webpack_exports__\";\nvar webpackError = typeof Symbol === \"function\" ? Symbol(\"webpack error\") : \"__webpack_error__\";\nvar resolveQueue = (queue) => {\n\tif(queue && queue.d < 1) {\n\t\tqueue.d = 1;\n\t\tqueue.forEach((fn) => (fn.r--));\n\t\tqueue.forEach((fn) => (fn.r-- ? fn.r++ : fn()));\n\t}\n}\nvar wrapDeps = (deps) => (deps.map((dep) => {\n\tif(dep !== null && typeof dep === \"object\") {\n\t\tif(dep[webpackQueues]) return dep;\n\t\tif(dep.then) {\n\t\t\tvar queue = [];\n\t\t\tqueue.d = 0;\n\t\t\tdep.then((r) => {\n\t\t\t\tobj[webpackExports] = r;\n\t\t\t\tresolveQueue(queue);\n\t\t\t}, (e) => {\n\t\t\t\tobj[webpackError] = e;\n\t\t\t\tresolveQueue(queue);\n\t\t\t});\n\t\t\tvar obj = {};\n\t\t\tobj[webpackQueues] = (fn) => (fn(queue));\n\t\t\treturn obj;\n\t\t}\n\t}\n\tvar ret = {};\n\tret[webpackQueues] = x => {};\n\tret[webpackExports] = dep;\n\treturn ret;\n}));\n__webpack_require__.a = (module, body, hasAwait) => {\n\tvar queue;\n\thasAwait && ((queue = []).d = -1);\n\tvar depQueues = new Set();\n\tvar exports = module.exports;\n\tvar currentDeps;\n\tvar outerResolve;\n\tvar reject;\n\tvar promise = new Promise((resolve, rej) => {\n\t\treject = rej;\n\t\touterResolve = resolve;\n\t});\n\tpromise[webpackExports] = exports;\n\tpromise[webpackQueues] = (fn) => (queue && fn(queue), depQueues.forEach(fn), promise[\"catch\"](x => {}));\n\tmodule.exports = promise;\n\tbody((deps) => {\n\t\tcurrentDeps = wrapDeps(deps);\n\t\tvar fn;\n\t\tvar getResult = () => (currentDeps.map((d) => {\n\t\t\tif(d[webpackError]) throw d[webpackError];\n\t\t\treturn d[webpackExports];\n\t\t}))\n\t\tvar promise = new Promise((resolve) => {\n\t\t\tfn = () => (resolve(getResult));\n\t\t\tfn.r = 0;\n\t\t\tvar fnQueue = (q) => (q !== queue && !depQueues.has(q) && (depQueues.add(q), q && !q.d && (fn.r++, q.push(fn))));\n\t\t\tcurrentDeps.map((dep) => (dep[webpackQueues](fnQueue)));\n\t\t});\n\t\treturn fn.r ? promise : getResult();\n\t}, (err) => ((err ? reject(promise[webpackError] = err) : outerResolve(exports)), resolveQueue(queue)));\n\tqueue && queue.d < 0 && (queue.d = 0);\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","","// startup\n// Load entry module and return exports\n// This entry module used 'module' so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(\"./src/content.js\");\n",""],"names":[],"sourceRoot":""}